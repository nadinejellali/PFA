<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href='https://www.unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" type="text/css" href="admin_style.css?v=<?php echo time();?>">
    <title>dashboard</title>
    <script src="contract.js"></script>
</head>
<body>
    <div id="headerContainer"></div>


    <body>
      <div id="headerContainer"></div>
    
        <div class="main">
            <section class="home">
                <div class="home-content">
                    <h1>Your Partner in Health and Wellness                    </h1>
                    <h3>We are committed to providing you with the best medical and healthcare services to help you live healthier and happier.</h3>
                   <!-- <h3>And I'm a<span class="multiple-text"></span></h3>
                    <p>I'm a web designer with extensive experience for over 3 years.
                        My goal is to create beautiful and functional websites that are easy to use.</p>-->
                    <div class="social-media">
                        <a href="#" style="--i:7;"><i class='bx bxl-facebook'></i></a>
                        <a href="#" style="--i:8;"><i class='bx bxl-twitter'></i></a>
                        <a href="#" style="--i:9;"><i class='bx bxl-instagram'></i></a>
                        <a href="#" style="--i:10;"><i class='bx bxl-linkedin'></i></a>
                    </div>
                    <a href="https://www.healthcare.com/" class="btn">More details </a>
                </div>
                <div class="home-img">
                    <img src="images/home.png">
                </div>
            </section>
            

          <div class="row">

            
            <div class="card" col-md-6 col-lg-4>
              
                <img src="images/compassion0.png" class="card-img">
                <div class="card-body">
                    <img src="images/compassion.png" class="card-img1"><h1 class="card-title">Compassion   </h1>
                    <p class="card-info">We understand that seeking medical care can be a stressful and emotional experience, and we strive to create a welcoming and supportive environment that puts our patients at ease and every one..</p>
                </div>
            </div>
            
            <div class="card" col-md-6 col-lg-4>
                <img src="images/excellence0.png" class="card-img">
                <div class="card-body">
                    <img src="images/excellence.png"class="card-img1"><h1 class="card-title">Excellence</h1>
                    <p class="card-info">We are committed to providing excellent medical care and services to our patients. We believe in continuously improving our skills, knowledge, and resources to ensure that we deliver the highest quality care possible.</p>
                </div>
            </div>
            
            <div class="card" col-md-6 col-lg-4>
                <img src="images/integrity0.png" class="card-img">
                <div class="card-body">
                    <img src="images/integrity.png"class="card-img1"><h1 class="card-title">Integrity  </h1>
                    <p class="card-info">We believe in practicing medicine with integrity and honesty. We are transparent in our communication and decision-making processes, and we always put our patient's interests first & provide best solution</p>
                </div>
            </div>
            <div class="card" col-md-6 col-lg-4>
                <img src="images/respect0.png" class="card-img">
                <div class="card-body">
                    <img src="images/respect.png" class="card-img1"> <h1 class="card-title">Respect  </h1>
                    <p class="card-info">We treat all individuals with respect and dignity, regardless of their background, beliefs, or circumstances. We believe that every person deserves to be treated with compassion and kindnes</p>
                </div>
            </div>
            <div class="card" col-md-6 col-lg-4>
                <img src="images/teamwork0.png" class="card-img">
                <div class="card-body">
                    <img src="images/teamwork.png" class="card-img1" ><h1 class="card-title">Teamwork  </h1>
                    <p class="card-info">We believe in working collaboratively with our team membersvand other healthcare professionals to provide comprehensive and effective care to our patients.</p>
                </div>
            </div></div>
           <div>
            <section class="services">

        <div class="box-container1">
        
        <div class="box1">
        
        <img src="images/icone1.png" width="50">
        
        
        
        
        </div>
        
        <div class="box1">
        
        <img src="images/icone2.png" width="50">
        
        
        
        
        </div>
        
        <div class="box1">
        
        <img src="images/icone3.png" width="100">
        
        
        
        
        </div>
        
        <div class="box1">
        
        <img src="images/icone4.png" width="100">
        
        
        
        
        </div>
        
        </div>            
        
    
          

            <section class="container">

                <div class="box-container4">
                
                <div class="box">
                
                <img src="images/about0.png" id="img2">
                
                </div>
                
                <div class="box">
                
                <img src="images/about1.png"  id="img1">
                
                
                <h1 id ="about">About Us</h1>
                <h3>ProHealth is a team of experienced medical professionals</h3>
                
                <p>Dedicated to providing top-quality healthcare services. We believe in a holistic approach to healthcare that focuses on treating the whole person, not just the illness or symptoms.</p>
                
                </div>
                
                </div>
            

  <div class="box-container2">
  

  <div class="box3">
  
  <img src="images/personne.png">
  
  <div class="detail"> <h3> Patient-oriented</h3>
  
  <p>By connecting to the needs and concerns of your patients, your medical website increases your visibility and that of your practice, informs your patient base and allows your patients to find and contact you more easily.</p>
  
  </div>
  
  </div>
  <div class="box3">
  
    <img src="images/tel.png" >
    
    
    <div class="detail">
    
    <h3>Mobile Friendly</h3>
    
    <p>Data shows that 30-40% of patients will view your website on a mobile device. We create responsive medical websites (responsive design) to offer visitors an optimal consultation experience that makes reading and navigation easier</p>
    
    </div>
    
    </div>
    
  
  <div class="box3">
  
  <img src="images/loop.png">
  
  <div class="detail">
  
  <h3>Expand your online presence</h3>
  
  <p>We optimize the visibility of your website on search engines by improving your natural referencing in order to help your patients find you.
    Medical office website | dental website | dentists and specialists website
    </p>
  
  </div>
  
  </div>
  </div>

       
        <div class="box-container3">
            <ul class="thumb1">

        <li><div class="box">
        
        <img src="images/psy.png">
  
        </div></li>
        
        <li><div class="box">
        
        <img src="images/ped.png">

        </div></li>
        
        <li><div class="box">
        
        <img src="images/neur.png">   
        </div></li>
        
        <li> <div class="box">
        
        <img src="images/card.png" >
 
        </div></li>
        <li><div class="box">
        
            <img src="images/emer.png">
            </div></li>
            <li><div class="box">
                <img src="images/gyn.png">
                </div></li>
        
        </div>    
           
        <div class="box-container2">
            <ul class="thumb2">

        <li><div class="box">
        
        <img src="images/health0.png">
  
        </div></li>
        
        <li><div class="box">
        
        <img src="images/health1.png">

        </div></li>
        
        <li><div class="box">
        
        <img src="images/health2.png">   
        </div></li>
        
        <li> <div class="box">
        
        <img src="images/health3.png" >
 
        </div></li>
        <li><div class="box">
        
         
        
        </div>    
     
</div>
</div>

 
            
    
             
<section class="home">
    <div class="home-img">
        <img src="images/home2.png">
    </div>
    <div class="home-content">
        <h1>Don’t Let Your Health Take a Backseat!</h1>
        <h3>Schedule an appointment with one of our experienced medical professionals today!</h3>
       <!-- <h3>And I'm a<span class="multiple-text"></span></h3>
        <p>I'm a web designer with extensive experience for over 3 years.
            My goal is to create beautiful and functional websites that are easy to use.</p>-->
        
    </div>
 
</section>         
    
            
<div id="footerContainer"></div>


    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"></script>
    
    
    

    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.2.7-rc.0/web3.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", async function() {
            if (typeof window.ethereum !== "undefined") {
                window.web3 = new Web3(window.ethereum);
                try {
                    await window.ethereum.request({ method: "eth_requestAccounts" });
                    await connectContract();
                    const userId = sessionStorage.getItem("userId"); // Récupération de l'ID de l'utilisateur en session
                    const userProfile = await contract.methods.getUserProfile(userId).call();
                    const UserBasicInfo = await contract.methods.getUserBasicInfo(userId).call();
                    const Docteurs = await contract.methods.usersLength().call();
                    const professionalID = userProfile[4]; // L'indice 4 correspond à l'identifiant professionnel
                    const patientsLengthWithID = await getPatientsLengthWithID(professionalID, contract);
                    document.getElementById("welcomeMessage").innerText = "Hello, DR " + UserBasicInfo[0] ;
                    document.getElementById("profileName").innerText =  UserBasicInfo[0]  ;
                    document.getElementById("profileImg").src ="../images/"+ extractFilenameFromPath(userProfile[5]);
                    document.getElementById("Docteurs").innerText = Docteurs +" Docteurs Existe";
                    document.getElementById("Patients").innerText = patientsLengthWithID +" Patients Existe";
                } catch (error) {
                    console.error(error);
                }
            } else {
                console.error("Web3 not found. Please install MetaMask.");
            }
        });

        function extractFilenameFromPath(fullPath) {
            var parts = fullPath.split(/[\\\/]/);
            return parts[parts.length - 1];
        }

        const getPatientsLengthWithID = async (id, contract) => {
            let count = 0;

            const patientsLength = await contract.methods.patientsLength().call();
            for (let i = 0; i < patientsLength; i++) {
                const patientProfile = await contract.methods.getPatientProfile(i).call();
                const patientProfessionalID = patientProfile[2]; // L'indice 2 correspond à l'identifiant professionnel

                if (id === patientProfessionalID) {
                    count++;
                }
            }

            return count;
        };
  
      
        // Charger le contenu de l'en-tête depuis le fichier header.html
        window.onload = function() {
            const headerContainer = document.getElementById("headerContainer");
            const xhr = new XMLHttpRequest();
            xhr.open("GET", "header.html", true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    headerContainer.innerHTML = xhr.responseText;
        const header = document.querySelector('header');

        function fixedNavbar() {
            header.classList.toggle('scrolled', window.pageYOffset > 0)
        }

        fixedNavbar();
        window.addEventListener('scroll', fixedNavbar);
        let menu = document.querySelector('#menu-btn');

        menu.addEventListener('click', function () {
            let nav = document.querySelector(".navbar");
            nav.classList.toggle('active');
        });

        let userBtn = document.querySelector('#user-btn');
        userBtn.addEventListener('click', function () {
            let userBox = document.querySelector('.profile-detail');
            userBox.classList.toggle('active');
        });
                }
            };
            xhr.send();
        };
    </script>
</body>
</html>
